<!DOCTYPE html>
<html lang="zh-cn" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> - 小楼一夜听春雨</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="龙哥" />
  <meta name="description" content="OpenStack Docs: Access Control Lists (ACLs) https://docs.openstack.org/swift/queens/overview_acl.html Access Control Lists (ACLs) updated: 2019-01-15 02:30 Access Control Lists (ACLs)¶ 通常，要创建，读取和修改容器和对象，您必须在与该帐户关联的项目中具有相应的角色，即您必须是该" />

  <meta name="keywords" content="小楼一夜听春雨, devops, trader, cloud-native" />






<meta name="generator" content="Hugo 0.46" />


<link rel="canonical" href="https://b.qqbb.app/post/jwl/swift-not-org/openstack-swift-overview-acl/" />



<link rel="icon" href="/favicon.ico" />











<link rel="stylesheet" href="/sass/jane.min.aaf3394fc81ccb6f6fe3fe458d1f5b61c39f151e44df83baaf1d7b3775a8b98d.css" integrity="sha256-qvM5T8gcy29v4/5FjR9bYcOfFR5E34O6rx17N3WouY0=" media="screen">





<meta property="og:title" content="" />
<meta property="og:description" content="OpenStack Docs: Access Control Lists (ACLs) https://docs.openstack.org/swift/queens/overview_acl.html Access Control Lists (ACLs) updated: 2019-01-15 02:30 Access Control Lists (ACLs)¶ 通常，要创建，读取和修改容器和对象，您必须在与该帐户关联的项目中具有相应的角色，即您必须是该" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://b.qqbb.app/post/jwl/swift-not-org/openstack-swift-overview-acl/" />
















<meta itemprop="name" content="">
<meta itemprop="description" content="OpenStack Docs: Access Control Lists (ACLs) https://docs.openstack.org/swift/queens/overview_acl.html Access Control Lists (ACLs) updated: 2019-01-15 02:30 Access Control Lists (ACLs)¶ 通常，要创建，读取和修改容器和对象，您必须在与该帐户关联的项目中具有相应的角色，即您必须是该">



<meta itemprop="wordCount" content="3718">



<meta itemprop="keywords" content="" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content=""/>
<meta name="twitter:description" content="OpenStack Docs: Access Control Lists (ACLs) https://docs.openstack.org/swift/queens/overview_acl.html Access Control Lists (ACLs) updated: 2019-01-15 02:30 Access Control Lists (ACLs)¶ 通常，要创建，读取和修改容器和对象，您必须在与该帐户关联的项目中具有相应的角色，即您必须是该"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">小楼一夜听春雨</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://b.qqbb.app/">首页</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://b.qqbb.app/post/">归档</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://b.qqbb.app/tags/">标签</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://b.qqbb.app/categories/">分类</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://b.qqbb.app/about/">关于</a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://b.qqbb.app/post/works/">作品</a>
          
        
      </li>
    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/" class="logo">
    
      小楼一夜听春雨
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://b.qqbb.app/">首页</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://b.qqbb.app/post/">归档</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://b.qqbb.app/tags/">标签</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://b.qqbb.app/categories/">分类</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://b.qqbb.app/about/">关于</a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://b.qqbb.app/post/works/">作品</a>
          

        

      </li>
    
    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title"></h1>
      
      <div class="post-meta">
        <time datetime="0001-01-01" class="post-time">
          0001-01-01
        </time>
        
        <span class="more-meta"> 约 3718 字 </span>
          <span class="more-meta"> 预计阅读 8 分钟 </span>

        
        
          <span id="busuanzi_container_page_pv">
            | 阅读 <span id="busuanzi_value_page_pv"></span>
          </span>
        

        
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#access-control-lists-acls">Access Control Lists (ACLs)</a></li>
</ul></li>
<li><a href="#access-control-lists-acls-access-control-lists-acls-permalink-to-this-headline">Access Control Lists (ACLs)<a href="#access-control-lists-acls" title="Permalink to this headline">¶</a></a>
<ul>
<li><a href="#container-acls-container-acls-permalink-to-this-headline">Container ACLs<a href="#container-acls" title="Permalink to this headline">¶</a></a>
<ul>
<li><a href="#common-acl-elements-common-acl-elements-permalink-to-this-headline">Common ACL Elements<a href="#common-acl-elements" title="Permalink to this headline">¶</a></a></li>
<li><a href="#keystone-auth-acl-elements-keystone-auth-acl-elements-permalink-to-this-headline">Keystone Auth ACL Elements<a href="#keystone-auth-acl-elements" title="Permalink to this headline">¶</a></a></li>
<li><a href="#tempauth-acl-elements-tempauth-acl-elements-permalink-to-this-headline">TempAuth ACL Elements<a href="#tempauth-acl-elements" title="Permalink to this headline">¶</a></a></li>
</ul></li>
<li><a href="#container-acl-examples-container-acl-examples-permalink-to-this-headline">Container ACL Examples<a href="#container-acl-examples" title="Permalink to this headline">¶</a></a>
<ul>
<li><a href="#example-public-container-example-public-container-permalink-to-this-headline">Example: Public Container<a href="#example-public-container" title="Permalink to this headline">¶</a></a></li>
<li><a href="#example-shared-writable-container-example-shared-writable-container-permalink-to-this-headline">Example: Shared Writable Container<a href="#example-shared-writable-container" title="Permalink to this headline">¶</a></a></li>
<li><a href="#example-sharing-a-container-with-project-members-example-sharing-a-container-with-project-members-permalink-to-this-headline">Example: Sharing a Container with Project Members<a href="#example-sharing-a-container-with-project-members" title="Permalink to this headline">¶</a></a></li>
<li><a href="#example-sharing-a-container-with-users-having-a-specified-role-example-sharing-a-container-with-users-having-a-specified-role-permalink-to-this-headline">Example: Sharing a Container with Users having a specified Role<a href="#example-sharing-a-container-with-users-having-a-specified-role" title="Permalink to this headline">¶</a></a></li>
<li><a href="#example-allowing-a-referrer-domain-to-download-objects-example-allowing-a-referrer-domain-to-download-objects-permalink-to-this-headline">Example: Allowing a Referrer Domain to Download Objects<a href="#example-allowing-a-referrer-domain-to-download-objects" title="Permalink to this headline">¶</a></a></li>
</ul></li>
<li><a href="#account-acls-account-acls-permalink-to-this-headline">Account ACLs<a href="#account-acls" title="Permalink to this headline">¶</a></a></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      

<p>OpenStack Docs: Access Control Lists (ACLs)</p>

<p><a href="https://docs.openstack.org/swift/queens/overview_acl.html">https://docs.openstack.org/swift/queens/overview_acl.html</a></p>

<h2 id="access-control-lists-acls">Access Control Lists (ACLs)</h2>

<p>updated: 2019-01-15 02:30</p>

<h1 id="access-control-lists-acls-access-control-lists-acls-permalink-to-this-headline">Access Control Lists (ACLs)<a href="#access-control-lists-acls" title="Permalink to this headline">¶</a></h1>

<p>通常，要创建，读取和修改容器和对象，您必须在与该帐户关联的项目中具有相应的角色，即您必须是该帐户的所有者。但是，所有者可以使用访问控制列表（ACL）授予对其他用户的访问权限。</p>

<p>有两种类型的ACL：</p>

<ul>
<li><a href="#container-acls">Container ACLs</a>. 这些是在容器上指定的，仅适用于该容器和容器中的对象。</li>
<li><a href="#account-acls">Account ACLs</a>. 这些在帐户级别指定，并应用于帐户中的所有容器和对象。</li>
</ul>

<h2 id="container-acls-container-acls-permalink-to-this-headline">Container ACLs<a href="#container-acls" title="Permalink to this headline">¶</a></h2>

<p>容器ACL存储在X-Container-Write和X-Container-Read 元数据中。ACL的范围仅限于设置元数据的容器和容器中的对象。此外：</p>

<ul>
<li>X-Container-Write授予对容器内对象执行PUT，POST和DELETE操作的能力。它不授予对容器本身执行POST或DELETE操作的能力。某些ACL元素还授予对容器执行HEAD或GET操作的能力。</li>
<li>X-Container-Read授予对容器内对象执行GET和HEAD操作的能力。某些ACL元素还授予对容器本身执行HEAD或GET操作的能力。但是，容器ACL不允许访问特权元数据（例如X-Container-Sync-Key）。</li>
</ul>

<p>容器ACL使用“V1”ACL语法，该语法是逗号分隔的元素字符串，如以下示例所示：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span></pre></td>
<td class="lntd">
<pre class="chroma">.r:*,.rlistings,7ec59e87c6584c348b563254aae4c221:*</pre></td></tr></table>
</div>
</div>
<p>元素之间可能出现空格，如以下示例所示：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span></pre></td>
<td class="lntd">
<pre class="chroma">.r : *, .rlistings, 7ec59e87c6584c348b563254aae4c221:*</pre></td></tr></table>
</div>
</div>
<p>但是，这些空格将从存储在X-Container-Write和X-Container-Read元数据中的值中删除 。另外，.r:字符串可以写为.referrer:，但存储为.r:。</p>

<p>虽然所有auth系统使用相同的语法，但由于不同auth系统使用的不同概念，某些元素的含义不同，如以下部分所述：</p>

<ul>
<li><a href="#acl-common-elements">Common ACL Elements</a></li>
<li><a href="#acl-keystone-elements">Keystone Auth ACL Elements</a></li>
<li><a href="#acl-tempauth-elements">TempAuth ACL Elements</a></li>
</ul>

<h3 id="common-acl-elements-common-acl-elements-permalink-to-this-headline">Common ACL Elements<a href="#common-acl-elements" title="Permalink to this headline">¶</a></h3>

<p>下表描述了Keystone auth和TempAuth都支持的ACL元素。这些元素只能与<code>X-Container-Read</code>一起使用（除了<code>.rlistings</code>, 与<code>X-Container-Write</code>使用时会发生错误）：</p>

<p>| 元件(元素)   |     描述      |<br />
|:&mdash;&mdash;&mdash;-|:&mdash;&mdash;&mdash;&mdash;-|
| <code>.r:*</code> | 任何用户都可以访问对象。请求中不需要令牌。 |<br />
| <code>.r:&lt;referrer&gt;</code>    |  引用者被授予访问对象的权限。referrer 由Referer 请求中的请求标头标识。无需令牌。 |
| <code>.r:-&lt;referrer&gt;</code>     | 支持此语法（在引用者前面加上“-”）。但是，如果另一个元素（例如<code>.r:*</code>）授予访问权限，它不会拒绝访问。   |<br />
| <code>.rlistings</code>     |   任何用户都可以对容器执行HEAD或GET操作，前提是用户对对象也具有读取权限（例如，也有<code>.r:*</code> 或者<code>.r:&lt;referrer&gt;</code>。不需要令牌。  |</p>

<h3 id="keystone-auth-acl-elements-keystone-auth-acl-elements-permalink-to-this-headline">Keystone Auth ACL Elements<a href="#keystone-auth-acl-elements" title="Permalink to this headline">¶</a></h3>

<p>下表描述了仅由Keystone身份验证支持的ACL的元素。Keystone auth还支持Common ACL Elements中描述的元素。</p>

<p>请求中必须包含一个令牌才能使这些ACL元素生效。</p>

<p>| 元件(元素)   |     描述      |<br />
|:&mdash;&mdash;&mdash;-|:&mdash;&mdash;&mdash;&mdash;-|
| <code>&lt;project-id&gt;:&lt;user-id&gt;</code> | 指定的用户，提供了作用于项目的令牌，包含在请求中，被授予访问权限。使用X-Container-Read时也可以访问容器。 |<br />
| <code>&lt;project-id&gt;:*</code>  |  在指定Keystone项目中具有角色的任何用户都具有访问权限。必须在请求中包含作用于项目的token。使用X-Container-Read时也可以访问容器。 |
| <code>*:&lt;user-id&gt;</code>    | 指定的用户具有访问权限。必须在请求中包含用户的token（作用于任何项目）。使用X-Container-Read时也可以访问容器。 |<br />
| <code>*:*</code>   |   任何用户都有权限。使用X-Container-Read时也可以访问容器。所述<code>*:*</code>元件不同于<code>.r:*</code> 元件，因为 <code>*:*</code>需要在该请求包括有效的token, 而<code>.r:*</code> 并不需要的token。此外， <code>.r:*</code>不授予对容器列表的访问权限。  |<br />
|<code>&lt;role_name&gt;</code> | 具有指定角色名称的用户在其中存储容器的项目被授予访问权限。作用域必须包含在项目范围内的用户令牌。使用<code>X-Container-Read</code>时也可以访问容器 。 |</p>

<p>注意</p>

<p>必须不再使用Keystone项目（租户）或用户 _names_（即<code>&lt;project-name&gt;:&lt;user-name</code>）， 因为在Keystone中引入domains，<em>names</em> 不是全局唯一的。您应该使用用户和项目 <em>ids</em> 。</p>

<p>为了向后兼容，当可以确定 被授权者项目，被授权者用户和被访问的项目要么尚未在domain中（例如，X-Auth-Token已通过Keystone V2 API获得），或者要么都在默认域中，而旧帐户将迁移到该域, 时，将使用keystoneauth授予ACLs using names。</p>

<h3 id="tempauth-acl-elements-tempauth-acl-elements-permalink-to-this-headline">TempAuth ACL Elements<a href="#tempauth-acl-elements" title="Permalink to this headline">¶</a></h3>

<p>下表描述了仅由TempAuth支持的ACL的元素。TempAuth auth同样支持Common ACL Elements中描述的元素。</p>

<p>| 元件(元素)   |     描述      |<br />
|:&mdash;&mdash;&mdash;-|:&mdash;&mdash;&mdash;&mdash;-|
| <code>&lt;user-name&gt;</code> | 指定的用户被授予访问权限。不支持通配符（“*”）字符。来自用户的令牌必须包含在请求中。 |</p>

<h2 id="container-acl-examples-container-acl-examples-permalink-to-this-headline">Container ACL Examples<a href="#container-acl-examples" title="Permalink to this headline">¶</a></h2>

<p>可以通过向容器URL发送包含X-Container-Write 和/或 X-Container-Read请求头的PUT或POST请求设置容器ACL。以下示例使用swift命令行客户端，该客户端支持通过其<code>--write-acl</code>和<code>--read-acl</code>选项设置的这些请求头。</p>

<h3 id="example-public-container-example-public-container-permalink-to-this-headline">Example: Public Container<a href="#example-public-container" title="Permalink to this headline">¶</a></h3>

<p>以下内容允许任何人列出www容器中的对象并下载对象。用户不需要在其请求中包含令牌。此ACL通常称为使容器“公开”。与<a href="https://docs.openstack.org/swift/queens/middleware.html#staticweb">StaticWeb</a>一起使用时非常有用：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">swift post www --read-acl <span class="s2">&#34;.r:*,.rlistings&#34;</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="example-shared-writable-container-example-shared-writable-container-permalink-to-this-headline">Example: Shared Writable Container<a href="#example-shared-writable-container" title="Permalink to this headline">¶</a></h3>

<p>以下内容允许任何人上传或下载对象。但是，要下载对象，必须知道对象的确切名称，因为用户无法列出容器中的对象。用户必须在上载请求中包含Keystone令牌。但是，它不需要作用于与容器关联的项目：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">swift post www <span class="se">\-</span>-read<span class="se">\-</span>acl <span class="s2">&#34;.r:\*&#34;</span> <span class="se">\-</span>-write<span class="se">\-</span>acl <span class="s2">&#34;\*:\*&#34;</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="example-sharing-a-container-with-project-members-example-sharing-a-container-with-project-members-permalink-to-this-headline">Example: Sharing a Container with Project Members<a href="#example-sharing-a-container-with-project-members" title="Permalink to this headline">¶</a></h3>

<p>以下内容允许<code>77b8f82565f14814bece56e50c4c240f</code> 项目的任何成员上传和下载对象或列出www容器的内容。<code>77b8f82565f14814bece56e50c4c240f</code> 必须在请求中包含作用于项目的token：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">swift post www <span class="se">\-</span>-read<span class="se">\-</span>acl <span class="s2">&#34;77b8f82565f14814bece56e50c4c240f:\*&#34;</span> <span class="se">\\</span>
               <span class="se">\-</span>-write<span class="se">\-</span>acl <span class="s2">&#34;77b8f82565f14814bece56e50c4c240f:\*&#34;</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="example-sharing-a-container-with-users-having-a-specified-role-example-sharing-a-container-with-users-having-a-specified-role-permalink-to-this-headline">Example: Sharing a Container with Users having a specified Role<a href="#example-sharing-a-container-with-users-having-a-specified-role" title="Permalink to this headline">¶</a></h3>

<p>以下内容允许在<code>www</code>容器的项目中分配了<code>my_read_access_role</code>的任何用户 下载对象或列出<code>www</code>容器的内容。作用于项目的用户令牌必须包含在下载或列表请求中：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">swift post www <span class="se">\-</span>-read<span class="se">\-</span>acl <span class="s2">&#34;my\_read\_access\_role&#34;</span></code></pre></td></tr></table>
</div>
</div>
<h3 id="example-allowing-a-referrer-domain-to-download-objects-example-allowing-a-referrer-domain-to-download-objects-permalink-to-this-headline">Example: Allowing a Referrer Domain to Download Objects<a href="#example-allowing-a-referrer-domain-to-download-objects" title="Permalink to this headline">¶</a></h3>

<p>以下内容允许来自<code>example.com</code>域的任何请求访问容器中的对象：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">swift post www <span class="se">\-</span>-read<span class="se">\-</span>acl <span class="s2">&#34;.r:.example.com&#34;</span></code></pre></td></tr></table>
</div>
</div>
<p>However, the request from the user <strong>must</strong> contain the appropriate Referer header as shown in this example request:
但是，来自用户的请求<strong>必须</strong>包含相应的 Referer 标头，如下示例所示：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell"><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-shell" data-lang="shell">curl -i <span class="nv">$publicURL</span>/www/document --head -H <span class="s2">&#34;Referer: http://www.example.com/index.html&#34;</span></code></pre></td></tr></table>
</div>
</div>
<p>注意</p>

<p>该Referer的头被包含在许多浏览器的请求。但是，由于在Referer头中很容易创建具有任何所需值的请求 ，因此referrer ACL的安全性非常低。</p>

<h2 id="account-acls-account-acls-permalink-to-this-headline">Account ACLs<a href="#account-acls" title="Permalink to this headline">¶</a></h2>

<p>注意</p>

<p>Keystone auth目前不支持帐户ACL</p>

<p>X-Account-Access-Control报头用于指定帐户级的ACL，通过身份验证系统的特定格式。这些标题只有帐户所有者可见且可设置（<code>swift_owner</code>为true）。帐户ACL的行为取决于身份验证系统。对于TempAuth，如果经过身份验证的用户具有ACL中列出的组的成员身份，则允许该用户访问该ACL的访问级别。</p>

<p>帐户ACL使用“V2”ACL语法，该语法是一个JSON字典，其密钥名为“admin”，“read-write”和“read-only”。（注意区分大小写）.一个<code>X-Account-Access-Control</code>报头值的例子是这样的，其中<code>a</code>，<code>b</code>和<code>c</code>是用户名：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span></pre></td>
<td class="lntd">
<pre class="chroma">{&#34;admin&#34;:[&#34;a&#34;,&#34;b&#34;],&#34;read-only&#34;:[&#34;c&#34;]}</pre></td></tr></table>
</div>
</div>
<p>Keys 可能不存在（如上例所示）.</p>

<p>生成ACL字符串的推荐方法如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></pre></td>
<td class="lntd">
<pre class="chroma">from swift.common.middleware.acl import format_acl
acl_data = { &#39;admin&#39;: [&#39;alice&#39;], &#39;read-write&#39;: [&#39;bob&#39;, &#39;carol&#39;] }
acl_string = format_acl(version=2, acl_dict=acl_data)</pre></td></tr></table>
</div>
</div>
<p>使用该<code>format_acl()</code>方法将确保JSON编码为ASCII（例如，对于Unicode,使用&rsquo;u1234&rsquo;）。虽然允许人工发送包含X-Account-Access-Control标头的curl命令 ，但由于可能存在人为错误，因此在执行此操作时应谨慎。</p>

<p>Within the JSON dictionary stored in <code>X-Account-Access-Control</code>, the keys have the following meanings:
在JSON字典中存储<code>X-Account-Access-Control</code>，Keys 具有以下含义：</p>

<p>| 访问权限   |     描述      |<br />
|:&mdash;&mdash;&mdash;-|:&mdash;&mdash;&mdash;&mdash;-|
| read-only | 这些身份可以读取帐户中的 <em>everything</em> （privileged headers除外）。具体来说，具有只读帐户访问权限的用户可以获取帐户中的容器列表，列出任何容器的内容，检索任何对象，以及查看任何容器或任何对象或任何帐户的（non-privileged）标头。 |
| read-write | 这些身份可以读取或写入（或创建）任何容器。具有读写帐户访问权限的用户，可以创建新容器，设置任何非特权容器标头，覆盖对象，删除容器等。读写用户不能设置帐户标头（或对帐户执行任何PUT/POST/DELETE请求）。 |
| admin | 这些身份具有“swift_owner”权限。具有帐户管理员访问权限的用户可以执行帐户所有者可以执行的任何操作，包括设置帐户标头和任何特权标头 - 从而授予对其他用户的只读，读写或管理员访问权限。 |</p>

<p>有关详细信息，请参阅<a href="https://docs.openstack.org/swift/queens/middleware.html#module-swift.common.middleware.tempauth"><code>swift.common.middleware.tempauth</code></a>。</p>

<p>有关ACL格式的详细信息，请参阅<a href="https://docs.openstack.org/swift/queens/misc.html#module-swift.common.middleware.acl"><code>swift.common.middleware.acl</code></a>。</p>

<p>updated: 2019-01-15 02:30</p>

    </div>

    
    
<div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">龙哥</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">0001-01-01</span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>


    
    

    <footer class="post-footer">
      

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/jwl/swift-not-org/openstack-swift-object-storage-result-analysis/">
            
            <i class="iconfont">
              <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

            </i>
            <span class="prev-text nav-default"></span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        
          <a class="next" href="/post/jwl/swift-not-org/swfit-account-quota-restful-api/">
            <span class="next-text nav-default"></span>
            <span class="prev-text nav-mobile">下一篇</span>
            
            <i class="iconfont">
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311 0.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889 0.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-0.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697C361.493148 60.273758 343.054193 61.470003 332.091514 74.487481z"></path>
</svg>

            </i>
          </a>
      </nav>
    </footer>
  </article>

  
  

  
  

  
  

  

  

  
  
    



        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
  
  
    <a href="mailto:273412935@qq.com" rel="me noopener" class="iconfont"
      title="email" >
      <svg class="icon" viewBox="0 0 1451 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

    </a>


<a href="https://b.qqbb.app/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
  
</div>

<div class="copyright">
  
  
  
  
  
  
  

  <span class="copyright-year">
    &copy;
    
      2017 -
    2019
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        圆月弯刀
        
      </span></span>

  
  
    <span id="busuanzi_container">
      访客数/访问量：<span id="busuanzi_value_site_uv"></span>/<span id="busuanzi_value_site_pv"></span>
    </span>
  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js" integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ="></script>
<script id="baidu_analytics">
  var _hmt = _hmt || [];
  (function() {
    if (window.location.hostname === 'localhost') return;
    var hm = document.createElement("script"); hm.async = true;
    hm.src = "https://hm.baidu.com/hm.js?9dd8f468d36a07a7a8bde80b13fe8eaf";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>





  
    <script type="text/javascript" src="/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  




  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>










</body>
</html>
